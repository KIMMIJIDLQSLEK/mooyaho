{% extends 'base.html' %}

{% block title %}
메인
{% endblock %}

{% load static %}
{% load my_filters %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/mountain/main.css' %}">
{% endblock %}

{% block content %}
<div id="content-wrapper">
{% for category, mountains in total.items %}
    {% if mountains|length != 0 %}
    <div class="recommend-area">
            <hr>
            {% if forloop.counter0 == 2 %}
                <h2>{{user.nickname}}님, {{category|get_category_title}}</h2>
            {% else %}
                <h2>{{category|get_category_title}}</h2>
            {% endif %}
            <hr>
            {% for mountain in mountains %}
                {% with id=mountain.id|intToStr %}
                    {% if forloop.counter0|divisibleby:2 %}
                        <div class="one-row">
                    {% endif %}
                            <div class="image-wrapper" data-id="{{id}}">
                                {% with img_path='images/mountains/mountain_'|add:id|add:'.jpeg' %}
                                    <img class="mountain-images" data-src="{% static img_path %}" alt="">
                                {% endwith %}
                                <p>{{mountain.mountain_name}}</p>
                            </div>  
                    {% if not forloop.counter0|divisibleby:2 or forloop.last %}
                        </div>
                    {% endif %}
                {% endwith %}
            {% endfor %}
    </div>
    {% endif %}
{% endfor %}
    <hr>
    <div class="recommend-post">
        <h2>{{user.nickname}}님, 이 게시글 어때요?</h2>
        {% for post in recommend_post %}
        <div class="post-box" onclick="location.href='/posts/{{ post.id }}/'">
            <div class="writer-box">
                <div class="writer-img-wrapper">
                    <img src="{{ post.user.profile_img }}" alt="">
                </div>
                <div class="writer-info">
                    <span>{{ post.user.nickname }}</span>
                    <span>{{ post.mountain_name }}</span>
                </div>
            </div>
            <div class="image-box">
                <img src="{{ post.hiking_img.url }}" alt="사진"/>
            </div>
            <div class="content-box">
                <div class="title">
                    <h2>{{ post.title }}</h2>
                </div>
                <div class="post-text">
                    <p>{{ post.content|slice:20 }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block js %}
<script src="{% static 'js/mountain/main.js' %}"></script>
{% endblock %}